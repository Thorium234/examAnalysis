{% extends 'base.html' %}{% load static %}{% load custom_filters %}{% block title %}Report Card - {{ student.full_name }}{% endblock %}{% block content %}<div class="container my-4"><div class="row"><div class="col-12 text-center mb-4 d-print-none"><button class="btn btn-info" onclick="window.print()"><i class="fas fa-print"></i> Print Report Card</button></div></div><div class="card shadow mb-4 p-4" id="report-card-container">
    <div class="text-center mb-4">
        <h1 class="h3 text-gray-800">ACADEMIC REPORT FORM</h1>
        <p class="text-muted">{{ exam.name }} - {{ exam.get_exam_type_display }}</p>
    </div>
    
    <div class="row mb-4">
        <div class="col-md-6">
            <p><strong>Name:</strong> {{ student.full_name }}</p>
            <p><strong>Admission No:</strong> {{ student.admission_number }}</p>
            <p><strong>Form:</strong> {{ student.form.name }}</p>
        </div>
        <div class="col-md-6 text-md-right">
            <p><strong>Exam Date:</strong> {{ exam.exam_date|date:"F j, Y" }}</p>
            <p><strong>Report Issued:</strong> {{ today|date:"F j, Y" }}</p>
        </div>
    </div>

    <h5 class="mb-3 text-primary">Subject Performance</h5>
    <div class="table-responsive">
        <table class="table table-bordered table-striped">
            <thead>
                <tr>
                    <th>Subject</th>
                    <th>Marks</th>
                    <th>Grade</th>
                    <th>Points</th>
                    <th>Remarks</th>
                    <th>Teacher</th>
                </tr>
            </thead>
            <tbody>
                {% for subject_data in subject_results %}
                <tr>
                    <td>{{ subject_data.subject.name }}</td>
                    <td>{{ subject_data.marks }}</td>
                    <td>{{ subject_data.grade }}</td>
                    <td>{{ subject_data.points }}</td>
                    <td>{{ subject_data.comment }}</td>
                    <td>{{ subject_data.teacher.get_full_name|default:subject_data.teacher.username }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6" class="text-center">No results available for this exam.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="row mt-4">
        <div class="col-md-6">
            <h5 class="mb-3 text-primary">Overall Summary</h5>
            <ul class="list-group list-group-flush">
                <li class="list-group-item"><strong>Total Marks:</strong> {{ summary.total_marks }}</li>
                <li class="list-group-item"><strong>Mean Marks:</strong> {{ summary.mean_marks|floatformat:2 }}</li>
                <li class="list-group-item"><strong>Mean Grade:</strong> {{ summary.mean_grade }}</li>
                <li class="list-group-item"><strong>Total Points:</strong> {{ summary.total_points }}</li>
            </ul>
        </div>
        <div class="col-md-6">
            <h5 class="mb-3 text-primary">Position</h5>
            <ul class="list-group list-group-flush">
                <li class="list-group-item"><strong>Stream Position:</strong> {{ summary.stream_position }}/{{ summary.total_students_in_stream }}</li>
                <li class="list-group-item"><strong>Overall Position:</strong> {{ summary.overall_position }}/{{ summary.total_students_in_class }}</li>
            </ul>
        </div>
    </div>
    
    <div class="row mt-4">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <p class="mb-0"><strong>Class Teacher's Comment:</strong> {{ summary.class_teacher_comment }}</p>
                </div>
            </div>
        </div>
    </div>
</div>
</div>{% endblock %}